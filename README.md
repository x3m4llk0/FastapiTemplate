# Архитектура проекта FastAPI

## Основная структура проекта

```plaintext
my_fastapi_application/
│
├── app/                            # Основная папка приложения
│   ├── __init__.py
│   ├── main.py                     # Точка входа в приложение FastAPI
│   │
│   ├── api/                        # Папка для API роутеров и эндпоинтов
│   │   ├── __init__.py
│   │   └── v1/                     # Версия API
│   │       ├── __init__.py
│   │       ├── users.py            # Эндпоинты для управления пользователями
│   │       ├── items.py            # Эндпоинты для управления предметами
│   │       └── auth.py             # Эндпоинты для аутентификации
│   │
│   ├── admin/                      # Папка для административных задач   *Добавляется при необходимости*     
│   │       ├── __init__.py
│   │       ├── panel.py            # Панель для администрирования. *При необходимости*
│   │       └── routes.py           # Эндпоинты для администрирования. *При необходимости*
│   │
│   ├── core/                       # Основные настройки и конфигурации приложения
│   │   ├── __init__.py
│   │   ├── config.py               # Конфигурации приложения (например, базы данных, внешних API)
│   │   └── logger.py               # Настройки логирования
│   │
│   ├── database/                   # Папка для работы с базой данных
│   │   ├── __init__.py
│   │   ├── postgres.py             # Настройка подключения к базе данных postgres
│   │   ├── mongo.py                # Настройка подключения к базе данных mongo
│   │   ├── redis.py                # Настройка подключения к базе данных redis
│   │   ├── data_layer/              # Слой доступа к данным (Data Access Layer)
│   │   │   ├── __init__.py
│   │   │   ├── base_dao.py         # Базовый клас содержжащий основные CRUD операции
│   │   │   ├── users.py            # Запросы для работы с данными пользователей
│   │   │   ├── items.py            # Запросы для работы с данными предметов
│   │   │   └── ...
│   │   └── migrations/             # Папка для хранения миграций базы данных
│   │       ├── env.py
│   │       ├── script.py.mako
│   │       └── versions/           # Файлы версий миграций
│   │           ├── c97bd9ec9650_added_required_tables.py
│   │           └── ...
│   │
│   ├── models/                     # SQLAlchemy модели базы данных
│   │   ├── __init__.py
│   │   ├── users.py                # Модель пользователя
│   │   ├── items.py                # Модель предмета
│   │   └── status.py               # Модель статусов
│   │
│   ├── schemas/                    # Pydantic модели для валидации данных (schemas) *Допускается добавление подпапок для разделения логики*
│   │   ├── __init__.py
│   │   ├── users.py                # Pydantic схемы для пользователя
│   │   ├── items.py                # Pydantic схемы для предметов
│   │   └── status.py               # Pydantic схемы для статусов
│   │ 
│   ├── middlewares/                # Папка для пользовательских мидлварей
│   │   ├── __init__.py
│   │   └── custom_middlewares.py   # Определение пользовательских миделварей
│   │
│   ├── services/                   # Бизнес-логика и взаимодействие с внешими и внутренними сервисами
│   │   ├── __init__.py
│   │   ├── redis_service.py        # Сервис для работы с Redis
│   │   ├── request_service.py      # Логика управления запросами к внешнему сервису
│   │   └── broker_service.py       # Сервис для работы с брокерами
│   │
│   ├── dependencies/               # Зависимости для DI (Dependency Injection). *Допускается добавление подпапок для разделения логики*
│   │   ├── __init__.py
│   │   ├── users.py                # Зависимости, связанные с пользователями
│   │   └── auth.py                 # Зависимости, связанные с аутентификацией
│   │
│   ├── utils/                      # Утилиты и вспомогательные функции. *Добавляется при необходимости*
│   │   ├── __init__.py
│   │   ├── hashing.py              # Утилиты для хеширования паролей
│   │   └── pagination.py           # Утилиты для пагинации
│   │
│   └──exceptions/                  # Папка для пользовательских исключений
│       ├── __init__.p
│       └── custom_exceptions.py    # Определение пользовательских исключений.  *Допускается добавление подпапок для разделения логики*
│    
├── tests/                          # Тесты для приложения. *Допускается добавление подпапок для разделения логики*
│   ├── __init__.py
│   ├── test_users.py               # Тесты для пользовательских эндпоинтов
│   ├── test_items.py               # Тесты для предметов
│   └── test_auth.py                # Тесты для аутентификации
│
├── .env                            # Файл окружения для конфигурации приложения
├── Dockerfile                      # Файл для сборки Docker образа
├── docker-compose.yml              # Docker Compose файл для контейнеризации сервисов
├── requirements.txt                # Зависимости Python
├── alembic.ini                     # Конфигурация Alembic для миграций базы данных
├── Makefile                        # Makefile для автоматизации задач
└── README.md                       # Документация проекта
```



## Версиониование моделей данных и схем:
```plaintext
models/
├── v1/
│   ├── __init__.py
│   └── users.py       # Модель данных для первой версии
├── v2/
│   ├── __init__.py
│   └── users.py       # Модель данных для второй версии, возможно, с изменениями
```


## Версионирование бизнес-логики (сервисы):
```plaintext
services/
├── v1/
│   ├── __init__.py
│   └── user_service.py   # Логика для работы с первой версией моделей и схем
└── v2/
    ├── __init__.py
    └── user_service.py   # Логика для работы со второй версией моделей и схем
```
